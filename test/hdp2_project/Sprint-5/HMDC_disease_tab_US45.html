<html xmlns:concordion="http://www.concordion.org/2007/concordion" xmlns:cc="http://fewi.custom.commands.FewiExtensions">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style>
	table {border-collapse: collapse; padding-bottom:5px; margin-bottom:5px;}
	table, th, td {border: 1px solid #CCCCCC;}
	td, th {padding:2px;}
	.man {background-color:#FFFFCC;}
	ul {padding: 0px; padding-bottom:3px; padding-top:0px; margin: 0px;}
	ol {padding: 0px; padding-bottom:3px; padding-top:0px; margin: 0px;}
	li {padding-left:2px; padding-top:0px; padding-bottom:0px; margin-left:25px;}
	p {margin:2px 0px;}
</style>

    <title>User Story 45</title>
</head>

<body>

<div id="maintitle"><h1>HMDC - Disease Tab </h1>
    <ul>
        <li>User Story 45 - HMDC - Disease Tab changes for boolean queries</li>
    </ul>
</div>



<div id="acceptance">
    <h2>Test Requirements</h2>
    <ol>
         <li>Search MP and OMIM vocabularies with User's query and determine the set of OMIM and or MP terms to use for searching the annotations.</li>
         <li>Search the simple set of mouse genoclusters for annotations to the MP/OMIM term search set.</li>
         <li>Search the human gene/OMIM annotations for annotations to the OMIM term search set.</li>
         <li>Apply boolean operation if present (explicit AND, OR, AND NOT or implicit OR).</li>
         <li>For every genocluster that results, return all diseases with annotations to those resulting genoclusters.</li>
         <li>For every human gene that results, return all disease with annotations to those resulting human genes.</li>
    </ol>
	       
	
	
	More details -- <a href=http://mgiwiki/mediawiki/index.php/sw:HMDC_Boolean_Query>boolean queries</a>
</div>


<div id="tests">
    <h2>Tests</h2>
    
	<div id="manual">
<!-- To insert manual test results, use the following:
<p concordion:assertTrue="true">testing assertTrue - displays as green</p>
<p concordion:assertTrue="false">testing assertFalse - displays as red</p>
 -->
		<h3>Manual tests</h3>
		
		<ol>
    	
    	    <li>Search for results with a single OMIM term
    		<p concordion:assertTrue="false">new test</p>  
    		<ol>
    		  <li>Query for OMIM term with no mouse or human annotations; 604324; Adult Acne.  Expect: 0 results</li>
    		  <li>Query for OMIM term with only mouse annotations; direct OMIM annotation only; 203500, Alkaptonuria; AKU.  Expect: 1 disease.</li>
    		  <li>Query for OMIM term with only mouse annotations; direct+indirect OMIM annotations; 606391, Maturity-Onset Diabetes of the Young; MODY.  Expect: 3 diseases (1 direct + 2 indirect).</li>
    		  <li>Query for OMIM term with only human annotations; direct OMIM annotation only; 606243, Alveolar Soft Part Sarcoma; ASPS.  Expect: 1 disease.</li>
    		  <li>Query for OMIM term with only human annotations; direct+indirect OMIM annotations; 123150, Jackson-Weiss Syndrome; JWS.  Expect: 1 direct disease + 13 indirect diseases.</li>
    		  <li>Query for OMIM term with mouse and human annotations; direct only; 604290, Aceruloplasminemia.  Expect 1 disease.</li>
    		  <li>Query for OMIM term with mouse and human annotations; direct+indirect; 148190, Keratitis, Hereditary.  Expect: 1 direct; 5 human indirect; 2 mouse and human indirect diseases; total=8.</li>
    		  <li>Query for OMIM term with only non-simple mouse OMIM annotations (should not be returned); nnnn.  Expect: 0 diseases. </li>
    	    </ol></li>
    	    
    	    <li>Search for results with a single MP term
    		<p concordion:assertTrue="false">new test</p>  
    		<ol>
    		  <li>Query for MP term with no mouse OMIM annotations to same genocluster; MP:0010713; genes=col*.  Expect: 0 diseases</li>
    		  <li>Query for MP term with mouse OMIM annotation to same genocluster/different genotype; MP:0003213, decreased susceptibility to age related obesity.  Expect: 1 disease; OPA1.
    		  <li>Query for MP term with mouse OMIM annotations to genocluster (same and diff genotypes); MP:0005239; genes=abc*.  Expect: 2 diseases returned (same genotype as MP term) and 2 diseases returned (same genocluster/diff genotype than MP term)
    		  <ul><li>same genotype = PXE, STGD1; same genocluster/diff genotype = CORD3, RP19</li></ul></li>
    		  <li>Query for MP term with multiple mouse OMIM annotations to same disease cluster term on grid; MP:0008235(increased susceptibility to neuronal excitotoxicity); genes=psen*.  Expect: 2 diseases in disease tab (1 disease cluster on grid); AD, AD3</li>
    	    </ol></li>
    	    
    	    <li>Search for results with multiple OMIM terms (implicit ORs)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol>
    		  <li>Query for OMIM terms with only mouse annotations; direct OMIM annotation only; 203500, 179830.  Expect: 2 diseases; Renal Tubular Acidosis, Proximal and Alkaptonuria; AKU.</li>
    		  <li>Query for OMIM terms with only mouse annotations; direct+indirect OMIM annotations; 606391, 260450.  Expect: 5 diseases (2 direct; 3 indirect)
    		  <ul><li>direct = MODY, Pancreatic Insufficiency, Combined Exocrine</li>
    		      <li>indirect = NIDDM, MODY4, SDS</li>
    		  </ul></li> 
    		  <li>Query for OMIM terms with only human annotations; direct OMIM annotation only; 606243, 612356.  Expect: 2 diseases; ASPS, Heparin Cofactor II Deficiency.</li>
    		  <li>Query for OMIM terms with only human annotations; direct+indirect OMIM annotations; 614025, 603218.  Expect: 8 diseases; 2 direct; 6 indirect.
    		  <ul><li>direct = Hepatic Lipase Deficiency and HDL1</li>
    		      <li>indirect = NIDDM, CJD, FFI, GSD, Kuru.., Spongiform...</li>
    		  </ul></li>
    		  <li>Query for OMIM terms with mouse and human annotations; direct only; 606243, 611185.  Expect 2 diseases; RLS6 and ASPS.</li>
    		  <li>Query for OMIM terms with mouse and human annotations; direct+indirect; 607014, 218700.  Expect: 11 diseases; 2 direct; 5 indirect human; 2 indirect mouse; 2 indirect human/mouse.
    		  <ul><li>direct = Hurler Syndrome, CHNG2</li>
    		      <li>indirect = Scheie Syn, Hurler-Scheie Syn, Otitis; Hypothyroidism/Athyr, ASD7, CTHM, HLHS2, TOF, VSD3 </li>
    		 </ul></li>
    		  <li>Query for OMIM terms with mouse and human annotations with text; "shwachman diamond".  Expect: 2 diseases; 1 direct; 1 indirect mouse.</li>
    		  <li>Query for OMIM terms with mouse and human annotations with double quotes; shwachman diamond.  Expect: 3 diseases; 2 direct; 1 mouse indirect; 0 human indirect
    		  <ul><li>diseases = Diamond-Blackfan Anemia, Pancreatic Insuff Comb Exoc, Shwachman-Diamond Syndrome</li></ul></li>
    		  <li>Query for OMIM terms with mouse and human annotations with wild card; AUTS1*.  Expect: 8 diseases.</li>
    	    </ol></li>
    	    
    	    <li>Search for results with multiple MP terms (implicit ORs)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol>
    		  <li>test 1.1</li>
    	    </ol></li>
    	    
    	    <li>Search for results with a mix of OMIM and MP terms (implicit ORs)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol>
    		  <li>test 1.1</li>
    	    </ol></li>
    	    
    	    
    	    
    	    
  
		</ol>
    	    
      	    
	</div>
	<div id="sql">
	
	
 <!--  EXAMPLE TEST CASE USING DYNAMIC DATA SPREADSHEET AT https://docs.google.com/spreadsheet/ccc?key=0ArepxibBtJW2dEl0eEg1bElOc1Mxc1FnNGtmSmlUSlE#gid=2 
     			<li>
    			Query for <b concordion:set="#structure">4-cell stage</b> should return 
    			<b cc:assertEquals="getResultCount(#structure)"><b cc:dynamicData="countFor4CellStageResults"></b></b> assay results, 
    			<b cc:assertEquals="getAssayCount(#structure)"><b cc:dynamicData="countFor4CellStageAssays"></b></b> assays, 
    			and <b cc:assertEquals="getGeneCount(#structure)"><b cc:dynamicData="countFor4CellStageGenes"></b></b> genes.<br/></li>
  -->
 	</div>
</div>

</body>
</html>