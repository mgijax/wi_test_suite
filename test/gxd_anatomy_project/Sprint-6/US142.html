<html xmlns:concordion="http://www.concordion.org/2007/concordion" xmlns:cc="http://fewi.custom.commands.FewiExtensions">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style>
	table {border-collapse: collapse; padding-bottom:5px; margin-bottom:5px;}
	table, th, td {border: 1px solid #CCCCCC;}
	td, th {padding:2px;}
	.man {background-color:#FFFFCC;}
	ul {padding: 0px; padding-bottom:3px; padding-top:0px; margin: 0px;}
	ol {padding: 0px; padding-bottom:3px; padding-top:0px; margin: 0px;}
	li {padding-left:2px; padding-top:0px; padding-bottom:0px; margin-left:25px;}
	p {margin:2px 0px;}
</style>

    <title>User Story 142</title>
</head>

<body>

<div id="maintitle"><h1>Add filters to the GXD Result Summary</h1>
    <ul>
        <li>User Story 142 - Add filters to the GXD Result Summary</li>
      
    </ul>
</div><div id="TOC">
	<p>Contents: <a href="#maintitle">Title</a> | <a href="#acceptance">Test Requirements</a> | <a href="#manual">Manual Tests</a> | <a href="#sql">SQL Tests</a></p>
</div>



<div id="acceptance">
    <h2>Test Requirements</h2>
	<ol>
	   <li>Add filter option for selected fields on the GXD Results Summary to provide the user an additional way to narrow down results.
	   <ol><li>Anatomical Structure: 24 options - adipose tissue, alimentary system, branchial arches, cardiovascular system, cavities & their linings, early embryo, embryo-other, endocrine system, extraembryonic component, head, hemolymphoid system, integumental system, limbs, liver & biliary system, mesenchyme, muscle, nervous system, postnatal-other, renal & urinary system, reproductive system, respiratory system, sensory organs, skeletal system, tail </li>
	       <li>Assay Type: Immunohistochemistry, In situ reporter (knock-in), Norther blot, Nuclease S1, RNA in situ, RNA protection, RT-PCR, Western blot</li>
	   </ol></li>
	   <li>All the filter options are present at the top of each tab on the GXD Summary page - and should filter all the tabs at the same time: Results, Assays, Genes, and Images. (per GXD meeting - 1/24)
	   <ul><li>See the reference QF re: placement/style of filter buttons</li></ul></li>
	   <li>The filter options are present at the top of all versions of the GXD Summary pages listed below.  The type of heading present on each page is included for informational purposes.
	   <ol><li>Query Form Summaries - Standard QF (query results header w/ You Searched For)</li>
	       <li>Query Form Summaries - Differential QF (query results header w/ You Searched For)
	       <ul><li>Note - the default tab is Genes (not Results) for these Summaries</li></ul></li>
	       <li>by Marker (marker header)</li>
	       <li>by Marker/Assay Type (marker header + "Data Summary" w/assay type)</li>
	       <li>by Marker/Theiler Stage (marker header + "Data Summary" w/TS)</li>
	       <li>by EMAPA/EMAPS terms (structure header)</li>
	       <li>by Allele (allele header)</li>
	       <li>by Reference (J# header)</li>
	       <li>by Marker/Structure - link from BQ and Marker Tissue (no header - US 141)</li>
	       <li>by Marker/J# - link from GXD Lit (no header)</li>
	       <li>by Probe (no header)</li>
	       <li>by Antibody (no header)</li>
	       <li>others?</li>
	   </ol></li>
	   <li>Filters work on the "bucket" of data contained on the original Summary (either from QF or other specific summaries)
	   <ul><li>Rerunning the Query Form search with new or the same parameters removes all filters -- resets the "bucket" of data.</li></ul></li>
	   <li>Filters are limited to the items present in the initial "bucket" of data and continually change as filters are added/removed
	   <ol><li>When at least 1 item is checked for a filter and executed - the filter list will only include the checked items</li>
	       <li>When all previously checked items are unchecked for a filter and executed - the original filter list will return</li>
	       <li>Filtering items in 1 field may reduce the items to filter by in another.</li>
	   </ol></li>
	   <li>Users may select 1 or more items for each filter available.</li>
	   <li>User may un-select 1 or more items for each filter available.
	   <ul><li>Provide two options: button at top of page or un-check of box within Filter</li></ul></li>
	   <li>Display special filter message in the heading  of all the Summary pages per Reference Summary style (text that specifically notes objects removed).
	   <ul><li>message = "Filters:  No filters selected."</li>  </ul></li>
	   <li>Provide users a list of filters selected in the heading of the Summary page as part of each filter event.
	   <ul><li>Each item is displayed as a button and also acts as an "undo" for the user.</li></ul></li>
	   <li>Provide users the option to remove all filters in 1 step.</li>
	   <li>Provide users with updated counts each time a filter is added/removed
	   <ul><li>Applicable for all 4 GXD Summaries: Gene, Assay, Results, Image</li>
	       <li>Per GXD meeting on 1/24 - display the filtered counts in the Tabs</li>
	       <li>Per GXD meeting on 1/24 - no need to display original counts of summary (as the Reference Summary does)</li>
	   </ul></li>
	   <li>Pagination counts and controls are updated after each filter event for all GXD Summaries</li>
	   <li>You searched for values continue to be displayed during the filter events and are not changed.</li>
	   <li>Use the Reference QF as a guide to the UI display as applicable.</li>
       <li>Filters should work properly in all supported browsers (IE, Firefox, Safari)</li>
       
	</ol>
</div>
 
 <div id="tests">
    <h2>Tests</h2>
    
	<div id="manual">
<!-- To insert manual test results, use the following:
<p concordion:assertTrue="true">testing assertTrue - displays as green</p>
<p concordion:assertTrue="false">testing assertFalse - displays as red</p>
 -->
		<h3>Manual tests</h3>
		
		<ol>
    		
    		<li>Verify all the versions of the GXD Summary pages display the filters on each Summary Tab and "filter text" in heading area. (req 1,2,3,8)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol><li>Standard QF Summary</li>
	            <li>Differential QF Summary</li>
	            <li>by Marker</li>
	            <li>by Marker/Assay Type - link on Marker Detail</li>
	            <li>by Marker/Theiler Stage - link on Marker Detail</li>
	            <li>by EMAPA term - link on QS, Anatomy Browser</li>
	            <li>by EMAPS term - link on Anatomy Browser, Assay Detail</li>
	            <li>by Allele - e.g. A&lt;y&gt;   </li>
	            <li>by Reference</li>
	            <li>by Marker/Structure - link from BQ and Marker Tissue</li>
	            <li>by Marker/J# - link from GXD Lit</li>
	            <li>by Probe - e.g. MGI:2670297</li>
	            <li>by Antibody - e.g. MGI:1330766</li>
    		    
    		</ol></li>
    		
    		<li>Verify Anatomical Structure initial filter - counts - pagination displays as expected via Std QF. (reqs 1,4)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol><li>adipose tissue terms: adipose tissue, brown fat, white fat, etc. (only stage 28)</li>
    		    <li>alimentary system terms: gut endoderm, intestine, lip, lower jaw,  etc. (stages 12-26)</li>
    		    <li>branchial arches terms: 1st branchial groove, branchial pouch, 1st branchial arch maxillary-mandibular groove,  etc. (stages 12-19) </li>
    		    <li>cardiovascular system terms: 1st arch artery,  right atrium, iliac artery (stages 12-28)</li>
    		    <li>cavities & their linings terms:  </li>
    		    <li>early embryo terms: </li>
    		    <li>embryo-other terms: </li>
    		    <li>endocrine system terms:  </li>
    		    <li>extraembryonic component terms:  </li>
    		    <li>head terms:  </li>
    		    <li>hemolymphoid system terms:  </li>
    		    <li>integumental system terms:  </li>
    		    <li>limbs terms:  </li>
    		    <li>liver & biliary system terms:  </li>
    		    <li>mesenchyme terms:  </li>
    		    <li>muscle terms:  </li>
    		    <li>nervous system terms:  </li>
    		    <li>postnatal-other terms:  </li>
    		    <li>renal & urinary system terms:  </li>
    		    <li>reproductive system terms:  </li>
    		    <li>respiratory system terms:  </li>
    		    <li>sensory organs terms:  </li>
    		    <li>skeletal system terms:  </li>
    		    <li>tail </li>
    		    
    		</ol></li>
    		
    		<li>Verify Assay Type filter initial filter - counts - pagination displays as expected via Std QF. (reqs 1,4)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol><li>list of tests</li>
    		    
    		</ol></li>
    		
    		<li>Verify Anatomical Structure initial filter - counts - pagination displays as expected via Differential QF. (reqs 1,4)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol><li>list of tests</li>
    		    
    		</ol></li>
    		
    		<li>Verify Assay Type filter initial filter - counts - pagination displays as expected via Differential QF. (reqs 1,4)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol><li>list of tests</li>
    		    
    		</ol></li>
    		
    		<li>Verify Anatomical Structure filter - add/remove items - counts updated. (req 6,7, 11)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol><li>list of tests</li>
    		    
    		</ol></li>
    		
    		<li>Verify Assay Type filter initial filter - add/remove items - counts updated.  (req 6,7, 11)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol><li>list of tests</li>
    		    
    		</ol></li>
    		
    		<li>Verify filtering by Assay Type alters options in Anatomical Structure filter (req 5)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol><li>list of tests</li>
    		    
    		</ol></li>
    		
    		<li>Verify filtering by Anatomical Structures alters options in Assay Type filter (req 5)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol><li>list of tests</li>
    		    
    		</ol></li>
    		
    		<li>Verify list of filters displayed in the heading and "undo" functionality (req 9)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol><li>list of tests</li>
    		    
    		</ol></li>
    		
    		<li>Verify pagination works as expected as filters added/removed (req 12)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol><li>list of tests</li>
    		    
    		</ol></li>
    		
    		<li>Verify "remove all filters" button (req 10)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol><li>list of tests</li>
    		    
    		</ol></li>
    		
    		<li>Verify re-run of Query Form removes all filters (req 4)
    		<p concordion:assertTrue="false">new test</p>  
    		<ol><li>list of tests</li>
    		    
    		</ol></li>
    		
    		<li>Verify filters works as expected on all supported browsers (IE, Safari, Firefox) (req 15)</li>
    		<p concordion:assertTrue="false">new test</p>  
    		
    		
		</ol>
	</div>
	<div id="sql">
	
	
 <!--  EXAMPLE TEST CASE USING DYNAMIC DATA SPREADSHEET AT https://docs.google.com/spreadsheet/ccc?key=0ArepxibBtJW2dEl0eEg1bElOc1Mxc1FnNGtmSmlUSlE#gid=2 
     			<li>
    			Query for <b concordion:set="#structure">4-cell stage</b> should return 
    			<b cc:assertEquals="getResultCount(#structure)"><b cc:dynamicData="countFor4CellStageResults"></b></b> assay results, 
    			<b cc:assertEquals="getAssayCount(#structure)"><b cc:dynamicData="countFor4CellStageAssays"></b></b> assays, 
    			and <b cc:assertEquals="getGeneCount(#structure)"><b cc:dynamicData="countFor4CellStageGenes"></b></b> genes.<br/></li>
  -->
 	</div>
</div>

</body>
</html>